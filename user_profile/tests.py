"""Tests for the user_profile app."""
from django.test import TestCase
from django.core.files.uploadedfile import SimpleUploadedFile
from .models import User, Follow


# Create your tests here.
class UserModelTest(TestCase):
    """Test the user model."""

    def setUp(self):
        # Create a user for testing
        self.user = User.objects.create(
            username='testuser',
            email='testuser@example.com',
            password='testpassword'
        )

    def test_user_creation(self):
        # Check if the user is created successfully
        self.assertEqual(User.objects.count(), 1)
        saved_user = User.objects.get(username='testuser')
        self.assertEqual(saved_user.email, 'testuser@example.com')
        self.assertEqual(saved_user.get_profile_picture(), '')  # Profile picture URL should be empty initially

    def test_user_str_method(self):
        # Check the __str__ method
        expected_str = 'testuser'
        self.assertEqual(str(self.user), expected_str)

    def test_user_profile_picture(self):
        # Upload a profile picture
        image_content = b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\x01\x00\x00\x00\x01\x08\x02\x00\x00\x00\xf8\x18\xf6\x87\x00\x00\x00\nIDAT\x08\xd7c\xf8\xff\xff?\x00\x05\xfe\x02\xfe\x01\xfe\x02\xfe\x03\xfe\x02\xfe\x02\xfe\x01\xfe\x01\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe\x00\xfe
